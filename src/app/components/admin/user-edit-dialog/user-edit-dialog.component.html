<p-button label="Editar" severity="secondary" styleClass="hidden md:inline" (onClick)="showEditDialog()" />
<p-button [rounded]="true" icon="pi pi-pencil" severity="secondary" styleClass="md:hidden ml-2"
  (onClick)="showEditDialog()" />
<p-dialog [(visible)]="isVisible" [modal]="true" [draggable]="false">
  <ng-template pTemplate="header">
    <span class="font-bold white-space-nowrap">
      Información de {{ user.name }}
    </span>
  </ng-template>
  <span class="p-text-secondary block mb-4">Actualizar información del usuario</span>
  <form [formGroup]="userForm" (submit)="onSubmit($event)">

    <div class="field">
      <label for="id">ID</label>
      <input type="text" pInputText name="id" [value]="user.id" [disabled]="true" class="w-full">
    </div>

    <div class="field">
      <label for="name">Nombre</label>
      <input formControlName="name" type="text" pInputText value="hola" formControlName="name" class="w-full">
      @if (submitted && userForm.controls['name'].invalid) {
      <error-p class="pb-1">{{getNameErrors()}}</error-p>
      }
    </div>

    <div class="field">
      <label for="email">Correo electrónico</label>
      <input formControlName="email" type="text" pInputText name="email" formControlName="email" class="w-full">
      @if (submitted && userForm.controls['email'].invalid) {
      <error-p class="pb-1">{{getEmailErrors()}}</error-p>
      }
    </div>

    <div formGroupName="passwords" class="flex gap-4 flex-column lg:flex-row">
      <div class="field" class="lg:flex-1">
        <label for="password">Contraseña</label>
        <input name="password" id="password" pInputText formControlName="password" type="password"
          placeholder="&bull;&bull;&bull;&bull;&bull;&bull;" class="lg:w-full">
        @if (submitted && passwordGroup.controls['password'].invalid) {
        <error-p class="pb-1">{{getPasswordErrors()}}</error-p>
        }
      </div>

      <div class="field" class="lg:flex-1">
        <label for="password">Repetir contraseña</label>
        <input formControlName="password_confirmation" type="text" name="password_confirmation"
          id="password_confirmation" pInputText type="password" placeholder="&bull;&bull;&bull;&bull;&bull;&bull;"
          class="lg:w-full">
        @if (submitted && passwordGroup.controls['password_confirmation'].invalid) {
        <error-p class=" pb-1">{{getPasswordConfirmationErrors()}}</error-p>
        }
      </div>
    </div>

    <div class="field mt-3">
      <label for="estado">Estado</label>
      <p-dropdown formControlName="estado" [options]="estados" optionLabel="nombre" optionValue="valor"
        placeholder="Selecciona el estado" styleClass="w-full" [showClear]="true"></p-dropdown>
      @if (submitted && userForm.controls['estado'].invalid) {
      <error-p class="pb-1">{{getEstadoErrors()}}</error-p>
      }
    </div>

    <div class="field">
      <label for="id_rol">Rol</label>
      <p-dropdown [options]="roles" optionLabel="nombre" optionValue="id" placeholder="Selecciona el rol"
        [filter]="true" filterBy="nombre" [showClear]="true" styleClass="w-full" formControlName="id_rol"></p-dropdown>
      @if (submitted && userForm.controls['id_rol'].invalid) {
      <error-p class="pb-1">{{getIdRolErrors()}}</error-p>
      }
    </div>

    <p-button type="submit" label="Editar usuario" styleClass="w-full" [loading]="isLoading" iconPos="right" />
  </form>
</p-dialog>