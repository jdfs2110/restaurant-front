<main class="flex justify-content-center align-items-center bg-blue-100">
  <form class="bg-white flex flex-column gap-2 shadow-1 px-4 py-6 md:p-8 lg:w-7" [formGroup]="registerForm"
    (submit)="onSubmit()">
    <div class="field">
      <label for="name">Nombre</label>
      <input type="text" name="name" id="name" pInputText formControlName="name" placeholder="Juan" class="lg:w-full">
      @if (submitted && registerForm.controls['name'].invalid) {
      <error-p class="pb-1">{{getNameErrors()}}</error-p>
      }
    </div>

    <div class="field">
      <label for="email">Email</label>
      <input type="text" name="email" id="email" pInputText formControlName="email" placeholder="mail@ejemplo.com"
        class="lg:w-full">
      @if (submitted && registerForm.controls['email'].invalid) {
      <error-p class="pb-1">{{getEmailErrors()}}</error-p>
      }
    </div>

    <div formGroupName="passwords" class="flex gap-4 flex-column lg:flex-row">
      <div class="field" class="lg:flex-1">
        <label for="password">Contraseña</label>
        <input type="text" name="password" id="password" pInputText formControlName="password" type="password"
          placeholder="&bull;&bull;&bull;&bull;&bull;&bull;" class="lg:w-full">
        @if (submitted && passwordGroup.controls['password'].invalid) {
        <error-p class="pb-1">{{getPasswordErrors()}}</error-p>
        }
      </div>

      <div class="field" class="lg:flex-1">
        <label for="password">Repetir contraseña</label>
        <input type="text" name="password_confirmation" id="password_confirmation" pInputText
          formControlName="password_confirmation" type="password" placeholder="&bull;&bull;&bull;&bull;&bull;&bull;"
          class="lg:w-full">
        @if (submitted && passwordGroup.controls['password_confirmation'].invalid) {
        <error-p class=" pb-1">{{getPasswordConfirmationErrors()}}</error-p>
        }
      </div>
    </div>

    <div class="field">
      <label for="id_rol">Rol</label>
      <p-dropdown [options]="roles" optionLabel="nombre" optionValue="id" formControlName="id_rol"
        placeholder="Selecciona el rol" [filter]="true" filterBy="nombre" [showClear]="true"
        styleClass="w-full"></p-dropdown>
      @if (submitted && registerForm.controls['id_rol'].invalid) {
      <error-p class="pb-1">{{getIdRolErrors()}}</error-p>
      }
    </div>

    @if (registerError) {
    <error-p>{{getError()}}</error-p>
    }

    <div class="flex justify-content-around mt-2">
      <p-button label="Limpiar" type="reset" (click)="resetForm()" severity="info" styleClass="w-full"
        [link]="true"></p-button>
      <p-button label="Enviar" type="submit" styleClass="w-full" [loading]="loading" iconPos="right"></p-button>
    </div>
  </form>
</main>