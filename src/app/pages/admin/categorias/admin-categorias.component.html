<main class="md:w-10 md:mx-auto">
  <div class="card">
    <p-toolbar styleClass="mt-2">
      <div class="p-toolbar-group-start">
        <strong>Categorias</strong>
      </div>
      <div class="p-toolbar-group-end flex gap-2">
        <p-button icon="pi pi-plus" [rounded]="true"></p-button>
        <p-button [icon]="getIconClass()" [rounded]="true" (onClick)="refreshTable()" />
        <p-autoComplete field="nombre" (completeMethod)="filterCategory($event)" [suggestions]="filteredCategories"
          (onSelect)="onSelect($event)" placeholder="Buscar categorÃ­a"></p-autoComplete>
      </div>
    </p-toolbar>
    <p-table styleClass="p-datatable-gridlines" [value]="categories" [lazy]="true" (onLazyLoad)="loadCategories($event)"
      [paginator]="true" [rows]="paginationLimit" [loading]="loading" [totalRecords]="totalCategories"
      responsiveLayout="stack" [tableStyle]="{'min-width': '375px'}" dataKey="id" [(first)]="first">

      <ng-template pTemplate="header">
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>Foto</th>
          <th>Acciones</th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-category>
        <tr>
          <td>{{ category.id }}</td>
          <td>{{ category.nombre }}</td>
          <td>
            <p-image [src]="category.foto" [alt]="category.nombre" width="200" height="100" [preview]="true"></p-image>
          </td>
          <td class="px-0 md:px-3">
            <div class="flex gap-2 md:gap-4 align-items-center">

              <app-categoria-edit-dialog [category]="category"
                (onUpdate)="updateCategory($event)"></app-categoria-edit-dialog>

              <p-button label="Eliminar" severity="danger" styleClass="hidden md:inline"
                (onClick)="showDialog($event, category)" />

              <p-button [rounded]="true" icon="pi pi-trash" severity="danger" styleClass="md:hidden"
                (onClick)="showDialog($event, category)" />
            </div>
        </tr>
      </ng-template>

    </p-table>
  </div>
  <p-confirmDialog />
</main>