<app-header></app-header>
<main class="w-full">
  <p-tabView>
    <p-tabPanel header="Perfil">
      <div class="w-10 mx-auto form">
        <form [formGroup]="userForm" (submit)="onEdit($event)">
          <div class="field">
            <label for="name">Nombre</label>
            <input formControlName="name" type="text" pInputText value="hola" formControlName="name" class="w-full">
            @if (perfilSubmitted && userForm.controls['name'].invalid) {
            <error-p class="pb-1">{{getNameErrors()}}</error-p>
            }
          </div>

          <div class="field">
            <label for="email">Correo electrónico</label>
            <input formControlName="email" type="text" pInputText name="email" formControlName="email" class="w-full">
            @if (perfilSubmitted && userForm.controls['email'].invalid) {
            <error-p class="pb-1">{{getEmailErrors()}}</error-p>
            }
          </div>

          <p-button type="submit" label="Actualizar perfil" styleClass="w-full" [loading]="perfilLoading"
            iconPos="right" />
        </form>
      </div>
    </p-tabPanel>

    <p-tabPanel header="Contraseña">
      <div class="w-10 mx-auto form">
        <form [formGroup]="passwordGroup" (submit)="onChangePassword($event)">
          <div class="field">
            <label for="password">Contraseña</label>
            <input name="password" id="password" pInputText formControlName="password" type="password"
              placeholder="&bull;&bull;&bull;&bull;&bull;&bull;" class="w-full">
            @if (passwordSubmitted && passwordGroup.controls.password.invalid) {
            <error-p class="pb-1">{{getPasswordErrors()}}</error-p>
            }
          </div>

          <div class="field">
            <label for="password">Repetir contraseña</label>
            <input formControlName="password_confirmation" type="text" name="password_confirmation"
              id="password_confirmation" pInputText type="password" placeholder="&bull;&bull;&bull;&bull;&bull;&bull;"
              class="w-full">
            @if (passwordSubmitted && passwordGroup.controls.password_confirmation.invalid) {
            <error-p class=" pb-1">{{getPasswordConfirmationErrors()}}</error-p>
            }
          </div>

          <p-button type="submit" styleClass="w-full" label="Cambiar contraseña" [loading]="passwordLoading"
            loadingIcon="right" />
        </form>
      </div>
    </p-tabPanel>
  </p-tabView>
</main>
<p-confirmDialog />